<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.lordicon.com/xdjxvujz.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="/css/videos.css">
    <script src="https://kit.fontawesome.com/3dd22133b8.js" crossorigin="anonymous"></script>
    <i class="fa-brands fa-stackpath"></i>
    <title>EVENTS</title>


</head>

<body>

    <div class="header">
    </div>



    <div class="header">
    </div>

    <div class="container-fluid">
        <div class="row offset-md-3">
            <div class="col-md-12">
                <div class="row align-items-center justify-content-between">
                    <h1>Events<lord-icon src="https://cdn.lordicon.com/aslgozpd.json" trigger="loop"
                            colors="primary:#000000" delay="370" scale="35" style="width:70px;height:70px">
                        </lord-icon>
                    </h1>
                    <div class="col-md-3 ">
                        <a id="cv" type="button" href="createEvent" class="btn btn-dark"> Create Event</a>
                    </div>
                </div>
                <hr color="black" size="3px">

                <div id="card-block" class="col-md-12 pt-5 mt-5">
                    <div class="d-flex flex-wrap w-250">

                        <% newEvent.forEach(event=> { %>

                            <div class="card mx-3   " style="width: 18rem;">
                                <form action="/delete_event" class="deletebtn h-100 d-flex flex-column" method="POST">
                                    <div class="image">
                                        <img src="<%= event.thumbnail %>" width="200px" height="200px"
                                            name="video_pictures">
                                    </div>
                                    <div class="title">
                                        <h6>
                                            <%= event.title %>
                                        </h6>
                                    </div>
                                    <div class="des">
                                        <p>
                                            <% if(event.description.length<=30){ %>
                                                <span class="text">
                                                    <%= event.description %>
                                                </span>
                                                <% } else { %>
                                                    <span class="original d-none">
                                                        <%= event.description %>
                                                    </span>
                                                    <span class="text">
                                                        <%= event.description.slice(0, 40) %>
                                                    </span>
                                                    <span class="read-more"><b>...</b></span>
                                                    <% } %>
                                        </p>


                                    </div>

                                    <input type="hidden" name="buttonk" value="<%= event._id %>">
                                    <div class="d-flex justify-content-center align-content-center mt-auto mb-2"
                                        id="action_block">
                                        <a class="btn btn-dark mx-2 " style="width: 40%;"
                                            href="/editEvent/<%= event._id %>">Edit</a>
                                        <button class="btn btn-dark mx-2 " style="width: 40%;" type="submit">
                                            Delete</button>

                                    </div>
                                </form>
                            </div>


                            <% }) %>

                    </div>
                </div>
            </div>
        </div>
    </div>










    <div class="sideBar">
        <ul>
            <li><a href="index"><img src="/images/logo.bdfc658d.png" width="80%" height="80%"></a></li>
            <li><a href="/index"><i class="fa fa-home"></i>Home</a></li>
            <li><a href="/categories"><i class="fas fa-user-alt"></i>Categories</a></li>
            <li><a href="/event"><i class="fa fa-play"></i>Events</a></li>
            <li><a href="/videos"><i class="fa fa-play"></i>Videos</a></li>
            <li><a href="/user"><i class="fas fa-user-alt"></i>Users</a></li>

            <li><a class="nav-link dropdown-toggle" href="/setting">
                    <i class="fa fa-gear fa-spin"></i> Settings</a></li>


        </ul>




    </div>






    <div class="footer">

    </div>
    <script>
        $(".deletebtn").on("submit", function (e) {
            e.preventDefault();
            if (confirm("do you want to delete this entry?")) {
                this.submit()
            }
        })

        $(document).on("click", ".card .des .read-more", function (e) {
            let original_text = $(this).siblings(".original").text().trim();
            console.log(original_text);
            // $(this).siblings("text")[0].textContent = original_text
            $(this).siblings("text").text(original_text);
        })
    </script>



</body>

</html>